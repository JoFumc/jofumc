<div class="block-editor block-editor-html">
<?php
require_once("library/core/class-form.php");
//
// BLOCK: Edit a server-side HTML file.
//
// Required parameters:
// -------------------
// @param $editor_filename The relative path to the file to edit.
//
// Optional parameters:
// -------------------
// @param $editor_option_preview Add a preview button.
//

$editor_filename = block_getParameter('editor-filename');
$editor_processor = block_getParameter('editor-processor');
$editor_width = block_getParameter('block-width').'px';

print 'Got a block width of: '.$editor_width.'px';

if (null == $editor_filename)
{
   print('Something is wrong.');
   return;
}
// Step 1: Create the base form
$editor = new akForm("edit-html-form",$editor_processor,FORM_METHOD_POST);

// Step 2: Generate items for the form */
  // Hidden reference to the file
$editor->createSimpleItem("hidden-filename-item",FORM_INPUT_HIDDEN,"edit-html-filename",$editor_filename);
  // Main text area 
$textarea = new akFormItem("file-text",FORM_INPUT_TEXTAREA,"edit-html-contents",file_get_contents($editor_filename));
$textarea->addStyle('width',$editor_width);
$textarea->vsize=15;
$editor->adopt($textarea);
  // Submit/cancel buttons
$editor->createSimpleItem("submit-item",FORM_INPUT_SUBMIT,"submit-item","Save changes");

// Step 3: Emit the form
$editor->emit();

?>
</div>
